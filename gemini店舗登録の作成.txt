user_productsテーブルのproductIDを同じ'baseCode'内で１から連番として生成する
user_productsテーブルの定義は以下

    public function up(): void
    {
        Schema::create('user_products', function (Blueprint $table) {
            $table->id();
            $table->foreignId('baseCode')->comment('店舗ID');      // usersテーブルの id を参照
            $table->integer('productID')->comment('商品名コード');  //  表示の並び順を指定
            $table->string('productName')->comment('商品名');      //  対象となるサービス名など
            $table->date('DateStart')->comment('営業開始日');      //  営業期間の指定　開始
            $table->date('DateEnd')->comment('営業終了日');        //  　　　　　　　　終了
            $table->date('TimeStart')->comment('開始時刻');
            $table->date('TimeEnd')->comment('終了時刻'); 
            $table->integer('capacity')->comment('定員')->default(0);
            $table->integer('price')->comment('料金')->default(0);
            $table->integer('WaysPay')->comment('支払い方法Bit');
            $table->string('memo')->comment('メモ');

            $table->timestamps();
        });
    }

store()で productID を設定する
    public function store(Request $request)
    {
        $request->validate([
            'baseCode' => 'required',
            'productName' => 'required',
            'DateStart' => 'required|date|before:DateEnd',
            'DateEnd' => 'required|date',
            'TimeStart' => 'required|date_format:H:i|before:TimeEnd',
            'TimeEnd' => 'required|date_format:H:i',
            'capacity' => 'required|integer|min:0|max:99',
            'price' => 'required|integer',
            'WaysPay' => 'required|array',
            'memo' => 'nullable|string',
        ]);

        UserProduct::create([
            'baseCode' => $request->baseCode,
            'productID' => 同一BaseCode内で連番を設定
            'productName' => $request->productName,
            'DateStart' => $request->DateStart,
            'DateEnd' => $request->DateEnd,
            'TimeStart' => $request->TimeEnd,
            'TimeEnd' => $request->TimeEnd,
            'capacity' => $request->capacity,
            'price' => $request->price,
            'WaysPay' => array_sum($request->WaysPay),
            'memo' => $request->memo,
        ]);

        return redirect()->route('user_products.create')->with('success', '商品が登録されました。');
    }


resources\views\dashboard.blade.php に以下を挿入 
・認証済usersテーブルの内容
・認証済usersのidに繋がるuser_productsのリスト


<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Dashboard') }}
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                {{ __("You're logged in!") }}
            </div>

※ここに　認証済usersテーブルの内容を表示

            
            <a href="{{ route('profile.edit') }}" class="link-button">
                登録情報変更
            </a>

ここに認証済usersのidに繋がるuser_productsのリストをtableで表示

            <a href="{{ route('user_products.create') }}" class="link-button">
                商品登録
            </a>


        </div>
    </div>
    
</x-app-layout>

テーブル定義は以下
        Schema::create('users', function (Blueprint $table) {
            $table->id();
            $table->string('name');
            $table->string('role')->default("");    // ロール "admin":店舗管理者、""一般ユーザー 
            $table->string('email')->unique();
            $table->timestamp('email_verified_at')->nullable();
            $table->string('password');

            $table->string('spName')->comment('店舗名');
            $table->string('spNameKana')->comment('店舗名カナ');	
            $table->string('spCode')->comment('店舗コード');      //  URLで店舗を指定する場合のコード
            $table->string('spAddrZip')->comment('郵便番号');	        
            $table->string('spAddrPref')->comment('県名');	
            $table->string('spAddrCity')->comment('市町村名');	
            $table->string('spAddrOther')->comment('地区名');	
            $table->string('spTel1')->comment('電話番号１');
            $table->string('spTel2')->comment('電話番号２')->default("");
            $table->string('spEMail')->comment('メールアドレス')->default("");
            $table->string('spURL')->comment('URL')->default("");
            $table->integer('spResvType')->comment('予約タイプ')->default(1);	
            $table->Text('spMsgText')->comment('連絡');

            $table->rememberToken();
            $table->timestamps();
        });

       Schema::create('user_products', function (Blueprint $table) {
            $table->id();
            $table->foreignId('baseCode')->comment('店舗ID');      // usersテーブルの id を参照
            $table->integer('productID')->comment('商品名コード');  //  表示の並び順を指定
            $table->string('productName')->comment('商品名');      //  対象となるサービス名など
            $table->integer('IsEnabled')->comment('有効/無効')->default(1);       //  表示対象とするかを指定
            $table->date('DateStart')->comment('営業開始日');      //  営業期間の指定　開始
            $table->date('DateEnd')->comment('営業終了日');        //  　　　　　　　　終了
            $table->time('TimeStart')->comment('開始時刻');
            $table->time('TimeEnd')->comment('終了時刻'); 
            $table->integer('capacity')->comment('定員')->default(0);
            $table->integer('price')->comment('料金')->default(0);
            $table->integer('WaysPay')->comment('支払い方法Bit');
            $table->string('memo')->comment('メモ');

            $table->timestamps();
        });

        <x-rTextbox type="text" name="name" value="{{old('name')}}" attributes="required autofocus" autocomplete="name" >{{ __('UserID') }}</x-rTextbox>

        <x-rTextbox type="password" name="password" value="{{old('password')}}" attributes="required" autocomplete="new-password" >{{ __('password') }}</x-rTextbox>

        <x-rTextbox type="password" name="password_confirmation" value="{{old('password_confirmation')}}" attributes="required" autocomplete="new-password" >{{ __('Confirm Password') }}</x-rTextbox>




    <div class="inputBoxframe">
        @php
            // $name (例: 'classrooms[1][crName]') をエラー取得用のキーに変換する
            // 'classrooms.1.crName' に変換される
            $errorKey = str_replace(['[', ']'], ['.', ''], $name);
            // 先頭と末尾の不要なドットを削除
            $errorKey = trim($errorKey, '.');
        @endphp
        <x-input-error :messages="$errors->get($errorKey)" class="mt-2" />
        <div class="inputBoxArea">
            @if ($slot != '')
                <label class="Guidelabel" for="{{ $name }}">{{ $slot }}</label>
            @endif
            <input type="{{ $type }}" name="{{ $name }}" id="{{ $name }}" class="{{ $class }}" value="{{ $value }}" placeholder="{{ $placeholder }}" {{ $attributes }} {{ $autocomplete }}/>
        </div>
    </div>


<?php

namespace App\View\Components;

use Closure;
use Illuminate\Contracts\View\View;
use Illuminate\View\Component;

class RTextbox extends Component
{
    public $name;
    public $type;
    public $value;
    public $placeholder;
    public $width;
    public $class;
    public $attributes;
    public $autocomplete;

    /**
     * Create a new component instance.
     */
    public function __construct($name, $type='text', $width = 10, $value = 'are', $placeholder = '入力してください',$class='',$attributes='',$autocomplete='')
    {
        $this->name=$name;
        $this->type=$type;
        $this->value=$value;
        $this->placeholder=$placeholder;
        $this->width=$width;
        $this->class="py-2 ". $class . "border border-gray-300 rounded-md";
        $this->attributes=$attributes;
        if($autocomplete == '') {
            $this->autocomplete='';
        }
        else {
            $this->autocomplete=' autocomplete="' . $autocomplete .'"';
        }
    }

    /**
     * Get the view / contents that represent the component.
     */
    public function render(): View|Closure|string
    {
        /* 表示 : resources\views\components\r-textbox.blade.php */
        return view('components.r-textbox');
    }
}


以下の「編集」リンク先を作成
<td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
    {{-- 編集ルートは適宜修正してください --}}
    <a href="#" class="text-indigo-600 hover:text-indigo-900">編集</a>
</td>

編集は
app\Http\Controllers\UserProductController.php
の edit()関数から呼ばれるViewとする

Viewには
・認証済usersテーブルの内容
・認証済usersのidに繋がるuser_productsの選択された商品
を渡す
user_productsの定義は以下
        Schema::create('user_products', function (Blueprint $table) {
            $table->id();
            $table->foreignId('baseCode')->comment('店舗ID');      // usersテーブルの id を参照
            $table->integer('productID')->comment('商品名コード');  //  表示の並び順を指定
            $table->string('productName')->comment('商品名');      //  対象となるサービス名など
            $table->integer('IsEnabled')->comment('有効/無効')->default(1);       //  表示対象とするかを指定
            $table->date('DateStart')->comment('営業開始日');      //  営業期間の指定　開始
            $table->date('DateEnd')->comment('営業終了日');        //  　　　　　　　　終了
            $table->time('TimeStart')->comment('開始時刻');
            $table->time('TimeEnd')->comment('終了時刻'); 
            $table->integer('capacity')->comment('定員')->default(0);
            $table->integer('price')->comment('料金')->default(0);
            $table->integer('WaysPay')->comment('支払い方法Bit');
            $table->string('memo')->comment('メモ');

            $table->timestamps();
        });



viewは resources\views\user_products\edit.blade.php として作成
レイアウトは以下の create画面とし、 {{old('TimeStart') }}を user_productsから引用する形に変更


<x-app-layout>
    <x-controltemfileio nameitem="productName" extension=".product"></x-controltemfileio>

    <x-slot name="header">
        <x-article-title caption="{{ __('Dashboard') }}" />
    </x-slot>

    <div class="py-12">
        <x-message :message="session('message')" />

        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
        

            <form action="{{ route('user_products.store') }}" method="POST">
                @csrf

                <input type="hidden" name="baseCode" value="{{ Session::get('ShopID') }}">
                <input type="hidden" name="productID" value="1">

                <x-rTextbox name="productName" type="text" 
                    value="{{old('DateStart') }}" required>商品名:</x-rTextbox>
                <x-rTextbox name="DateStart" type="date" 
                    value="{{old('DateStart') }}" required>営業開始日:</x-rTextbox>
                <x-rTextbox name="DateEnd" type="date" 
                    value="{{old('DateEnd') }}" required>営業終了日:</x-rTextbox>
                <x-rTextbox name="TimeStart" type="time" 
                    value="{{old('TimeStart') }}" required>開始時刻:</x-rTextbox>
                <x-rTextbox name="TimeEnd" type="time" 
                    value="{{old('TimeEnd') }}" required>終了時刻:</x-rTextbox>
                <x-rTextbox name="capacity" type="number" 
                    value="{{old('capacity', 10) }}" required>定員:</x-rTextbox>
                <x-rTextbox name="price" type="number" 
                    value="{{old('price', 1000) }}" required>料金:</x-rTextbox>

                <style>
                .box12{
                    margin: 2em 0;
                    color: 0;
                    background: #c6ffe4;
                    border-bottom: solid 6px #aac5de;
                    border-radius: 9px;
                }
                .box12 label {
                    margin: 0; 
                    padding: 0;
                }
                </style>

                <x-rCheckbox name="WaysPay" caption="支払い方法">                
                    @foreach ($shopPaysWay as $way)
                        <input  type="checkbox" name="WaysPay[]" 
                                value="{{ $way->PrBit }}" id="WaysPay_{{ $loop->index }}">
                        <label for="WaysPay_{{ $loop->index }}">{{ $way->PrName }}</label><br>
                    @endforeach
                </x-rCheckbox>

                <x-r-text-area name="memo" msgText="{{old('memo')}}">案内:</x-rTextbox>

                <button type="submit">登録</button>
            </form>
       </div>
    </div>
</x-app-layout>


更にコントローラに update関数を追加
editで編集された内容で更新する
